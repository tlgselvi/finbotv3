#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo ""
echo "ğŸ”’ Pre-push hooks baÅŸlatÄ±lÄ±yor..."
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# 1. Critical Tests
echo "[1/6] ğŸ§ª Critical Tests..."
pnpm test1 || exit 1

# 2. Coverage Check
echo ""
echo "[2/6] ğŸ“Š Coverage Analizi..."
pnpm coverage:analyze || echo "âš ï¸  Coverage kontrolÃ¼ atlandÄ±"

# 3. Secrets Scan
echo ""
echo "[3/6] ğŸ” Secrets Scan..."
pnpm sec:secrets || exit 1

# 4. SAST Scan
echo ""
echo "[4/6] ğŸ”’ SAST Scan..."
pnpm sec:sast || echo "âš ï¸  SAST kontrolÃ¼ atlandÄ±"

# 5. License Audit
echo ""
echo "[5/6] âš–ï¸  License Audit..."
pnpm sec:license || echo "âš ï¸  Lisans kontrolÃ¼ atlandÄ±"

# 6. Migration Guard
echo ""
echo "[6/6] ğŸ›¡ï¸  Migration Guard..."
pnpm db:dryrun || echo "âš ï¸  Migration kontrolÃ¼ atlandÄ±"

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "âœ… TÃ¼m pre-push kontrolleri geÃ§ti! Push devam ediyor..."
echo ""

